# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É ProTime –±–µ–∑ Supabase

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–í–µ—Å—å –ø—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å Supabase –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ Node.js + Express + PostgreSQL.

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `server/` - –≤–µ—Å—å –±—ç–∫–µ–Ω–¥ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ `src/lib/api.ts` - API –∫–ª–∏–µ–Ω—Ç
- ‚úÖ `src/hooks/useAuth.ts` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ `src/hooks/useProjects.ts` - –ø—Ä–æ–µ–∫—Ç—ã
- ‚úÖ `src/hooks/useTimeSlots.ts` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã
- ‚úÖ `src/hooks/useTasks.ts` - –∑–∞–¥–∞—á–∏
- ‚úÖ `src/hooks/useTaskCategories.ts` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ `src/hooks/useLeaveRequests.ts` - –æ—Ç–ø—É—Å–∫–∞
- ‚úÖ `src/hooks/useBookings.ts` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `src/hooks/useDailyStandups.ts` - —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ useTimeSlots

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js** 18 –∏–ª–∏ –≤—ã—à–µ
- **PostgreSQL** 16 –∏–ª–∏ –≤—ã—à–µ (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ PostgreSQL 18)
- **npm** –∏–ª–∏ **yarn**

## üîß –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

### Windows
1. –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫: https://www.postgresql.org/download/windows/
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres`

### macOS
```bash
brew install postgresql@18
brew services start postgresql@18
```

### Linux (Ubuntu/Debian)
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

## üóÑÔ∏è –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL
psql -U postgres

# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–≤ psql –∫–æ–Ω—Å–æ–ª–∏)
CREATE DATABASE protime_db;

# –í—ã–π–¥–∏—Ç–µ –∏–∑ psql
\q

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
psql -U postgres -d protime_db -f server/src/database/schema.sql
```

–ï—Å–ª–∏ —É –≤–∞—Å Windows –∏ psql –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ PATH:
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—É—Ç—å –∫ PostgreSQL, –æ–±—ã—á–Ω–æ:
# C:\Program Files\PostgreSQL\18\bin\psql.exe

cd "C:\Program Files\PostgreSQL\18\bin"
.\psql.exe -U postgres -d protime_db -f "C:\–ø—É—Ç—å\–∫\–ø—Ä–æ–µ–∫—Ç—É\server\src\database\schema.sql"
```

## ‚öôÔ∏è –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—ç–∫–µ–Ω–¥–∞

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å–µ—Ä–≤–µ—Ä–∞
cd server

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
# –í Windows –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Notepad –∏–ª–∏ –ª—é–±–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
# –í Mac/Linux –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–∏–∂–µ
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `server/.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```env
# Server Configuration
PORT=3001
NODE_ENV=development

# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5433
DATABASE_NAME=protime_db
DATABASE_USER=postgres
DATABASE_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å_–æ—Ç_postgres

# JWT Configuration
JWT_SECRET=–∏–∑–º–µ–Ω–∏—Ç–µ_—ç—Ç–æ—Ç_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–Ω–∞_—Å–ª—É—á–∞–π–Ω—É—é_—Å—Ç—Ä–æ–∫—É
JWT_EXPIRES_IN=7d

# CORS Configuration
CORS_ORIGIN=http://localhost:5173
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** 
- –ó–∞–º–µ–Ω–∏—Ç–µ `–≤–∞—à_–ø–∞—Ä–æ–ª—å_–æ—Ç_postgres` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
- –ò–∑–º–µ–Ω–∏—Ç–µ `JWT_SECRET` –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)

–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JWT_SECRET –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
```bash
# –í Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# –ò–ª–∏ –æ–Ω–ª–∞–π–Ω: https://www.grc.com/passwords.htm
```

## üöÄ –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞

```bash
# –ù–∞—Ö–æ–¥—è—Å—å –≤ –ø–∞–ø–∫–µ server/
npm run dev
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
üìç API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3001
üåç –û–∫—Ä—É–∂–µ–Ω–∏–µ: development
‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
```

## üé® –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cd ..

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
# –í Windows –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Notepad
# –í Mac/Linux:
echo "VITE_API_URL=http://localhost:3001/api" > .env
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
VITE_API_URL=http://localhost:3001/api
```

## ‚ñ∂Ô∏è –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
npm install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä –Ω–∞ `http://localhost:5173`

## üîê –®–∞–≥ 7: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
- Email: `admin@company.com`
- –ü–∞—Ä–æ–ª—å: `password`

**–°–æ—Ç—Ä—É–¥–Ω–∏–∫ 1:**
- Email: `ivan@company.com`
- –ü–∞—Ä–æ–ª—å: `password`

**–°–æ—Ç—Ä—É–¥–Ω–∏–∫ 2:**
- Email: `maria@company.com`
- –ü–∞—Ä–æ–ª—å: `password`

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

1. **–í–æ–π–¥–∏—Ç–µ** –≤ —Å–∏—Å—Ç–µ–º—É
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ - –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è 3 –¥–µ–º–æ-–ø—Ä–æ–µ–∫—Ç–∞
3. **–°–æ–∑–¥–∞–π—Ç–µ** –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
4. **–î–æ–±–∞–≤—å—Ç–µ** –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–æ—Ç
5. **–°–æ–∑–¥–∞–π—Ç–µ** –∑–∞–¥–∞—á—É

–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–∑–¥—Ä–∞–≤–ª—è—é! üéâ

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```
Error: connect ECONNREFUSED 127.0.0.1:5432
```

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ `.env` —Ñ–∞–π–ª–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `protime_db` —Å–æ–∑–¥–∞–Ω–∞

Windows:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã
services.msc
# –ù–∞–π–¥–∏—Ç–µ PostgreSQL –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª—É–∂–±–∞ –∑–∞–ø—É—â–µ–Ω–∞
```

Mac/Linux:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
pg_isready

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL (Mac)
brew services restart postgresql@18

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL (Linux)
sudo systemctl restart postgresql
```

### –û—à–∏–±–∫–∞ "JWT Secret is not defined"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `server/.env` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `JWT_SECRET`

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –±—ç–∫–µ–Ω–¥—É

```
Failed to fetch
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`

### –ü–æ—Ä—Ç 3001 —É–∂–µ –∑–∞–Ω—è—Ç

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `server/.env`:
```env
PORT=3002
```

–ò –≤ –∫–æ—Ä–Ω–µ–≤–æ–º `.env`:
```env
VITE_API_URL=http://localhost:3002/api
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `server/README.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- `MIGRATION_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Supabase
- `REMAINING_HOOKS_UPDATE.md` - —à–∞–±–ª–æ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ö—É–∫–æ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –≤ production:**

1. **–°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏** –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ** –Ω–æ–≤—ã–π JWT_SECRET
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** environment variables –≤–º–µ—Å—Ç–æ .env —Ñ–∞–π–ª–æ–≤
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ** SSL/HTTPS
5. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ** CORS —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
6. **–í–∫–ª—é—á–∏—Ç–µ** rate limiting

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ .env —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (TL;DR)

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –ë–î
psql -U postgres -c "CREATE DATABASE protime_db"
psql -U postgres -d protime_db -f server/src/database/schema.sql

# 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±—ç–∫–µ–Ω–¥
cd server
npm install
# –°–æ–∑–¥–∞–π—Ç–µ server/.env —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ë–î –∏ JWT_SECRET

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥
npm run dev

# 4. –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
cd ..
echo "VITE_API_URL=http://localhost:3001/api" > .env

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
npm install
npm run dev

# 6. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:5173
# –õ–æ–≥–∏–Ω: admin@company.com / password
```

–ì–æ—Ç–æ–≤–æ! üöÄ

